(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),l=(a(17),a(6)),i=a(7),s=a(9),u=a(8),f=a(10),d=a(2),m=(a(18),a(1)),h=(a(19),function(e){var t=e.transform,a=e.width,c=e.height,o=Object(n.useMemo)(function(){var e=m.k().domain([-1,a+1]).range([-1,a+1]);return{scale:e,axis:m.a(e).ticks((a+2)/(c+2)*10).tickSize(c).tickPadding(8-c)}},[a,c]),l=o.scale,i=o.axis;i.scale(t.rescaleX(l));var s=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(s.current).call(i)}),r.a.createElement("g",{className:"axis axis--x",ref:s})}),b=function(e){var t=e.transform,a=e.width,c=e.height,o=Object(n.useMemo)(function(){var e=m.k().domain([-1,c+1]).range([-1,c+1]);return{scale:e,axis:m.b(e).ticks(10).tickSize(a).tickPadding(8-a)}},[a,c]),l=o.scale,i=o.axis;i.scale(t.rescaleY(l));var s=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(s.current).call(i)}),r.a.createElement("g",{className:"axis axis--y",ref:s})},E=function(e){var t=e.transform,a=e.width,n=e.height;return r.a.createElement("rect",{className:"view",x:.5,y:.5,width:a-1,height:n-1,transform:t.toString()})},p=function(){return r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},r.a.createElement("stop",{offset:"0.0%",stopColor:"#2c7bb6"}),r.a.createElement("stop",{offset:"12.5%",stopColor:"#00a6ca"}),r.a.createElement("stop",{offset:"25.0%",stopColor:"#00ccbc"}),r.a.createElement("stop",{offset:"37.5%",stopColor:"#90eb9d"}),r.a.createElement("stop",{offset:"50.0%",stopColor:"#ffff8c"}),r.a.createElement("stop",{offset:"62.5%",stopColor:"#f9d057"}),r.a.createElement("stop",{offset:"75.0%",stopColor:"#f29e2e"}),r.a.createElement("stop",{offset:"87.5%",stopColor:"#e76818"}),r.a.createElement("stop",{offset:"100.0%",stopColor:"#d7191c"})))},v=function(e){var t=Object(n.useRef)(null),a=Object(n.useRef)(null),c=Object(n.useState)(m.o),o=Object(d.a)(c,2),l=o[0],i=o[1];return Object(n.useEffect)(function(){var e=m.l(t.current),n=m.n().scaleExtent([.5,8]).on("zoom",function(){i(m.d.transform)});n(e),m.l(a.current).on("click",function(){n.transform(e.transition().duration(750),m.o)})},[]),r.a.createElement("div",{className:"svgZoom"},r.a.createElement("button",{ref:a},"Reset"),r.a.createElement("svg",Object.assign({ref:t},e),r.a.createElement(p,null),r.a.createElement(E,Object.assign({transform:l},e)),r.a.createElement(h,Object.assign({transform:l},e)),r.a.createElement(b,Object.assign({transform:l},e))))},j=a(3);a(20);var O=function(e){var t=Object(n.useRef)(null),a=e.node,c=e.dragStart,o=e.dragEnd,l=e.updateNodes,i="translate(".concat(a.x,",").concat(a.y,")");return Object(n.useEffect)(function(){m.l(t.current).datum(a).call(m.c().on("start",function(e){e.fx=e.x,e.fy=e.y,c()}).on("drag",function(e){e.fx=m.d.x,e.fy=m.d.y,l()}).on("end",function(e){e.fy=e.fx=void 0,o()}))},[]),r.a.createElement("g",{className:"node",ref:t,transform:i},r.a.createElement("circle",{r:a.val}),r.a.createElement("text",{x:a.val+5,dy:".35em"},a.name))},g=function(e){var t=e.width,a=e.height,c=Object(n.useRef)(null),o=function(e){var t=Object(n.useState)(e),a=Object(d.a)(t,2),r=a[0],c=a[1],o=Object(n.useRef)(r);return o.current=r,[r,c,o]}(m.o),l=Object(d.a)(o,3),i=l[0],s=l[1],u=l[2],f=Object(n.useState)(e.nodes),h=Object(d.a)(f,2),b=h[0],E=h[1],p=Object(n.useMemo)(function(){var e=m.f().nodes(b).force("x",m.g(t/2).strength(.1)).force("y",m.h(a/2).strength(.1)).force("collide",m.e().radius(function(e){return e.val}));return e.on("tick",function(){E(function(e){return Object(j.a)(e)})}),e},[t,a]),v=Object(n.useCallback)(function(){p.alphaTarget(.3).restart()},[p]),g=Object(n.useCallback)(function(){p.alphaTarget(0)},[p]),x=Object(n.useCallback)(function(){p.alpha(1).restart()},[p]),y=Object(n.useCallback)(function(){var e=u.current.invert([m.d.offsetX,m.d.offsetY]),t=Object(d.a)(e,2),a=t[0],n=t[1];E(function(e){var t={id:e.length+1,name:"".concat(e.length+1),val:30,x:a,y:n},r=[].concat(Object(j.a)(e),[t]);return p.nodes(r),r}),x()},[p]);return Object(n.useEffect)(function(){var e=m.l(c.current),n=m.n().scaleExtent([1,40]).translateExtent([[-100,-100],[t+90,a+100]]);n.on("zoom",function(){s(m.d.transform)}),n(e),e.on("click",y)},[]),r.a.createElement("svg",{width:t,height:a,style:{backgroundColor:"#ccc"},className:"xxx",ref:c},r.a.createElement("g",{transform:i.toString()},b.map(function(e){return r.a.createElement(O,{key:e.id,node:e,updateNodes:x,dragStart:v,dragEnd:g})})))},x=(a(21),function(e,t){var a=t(e);return a.descendants().forEach(function(e){e.data.pos0={x:a.x,y:a.y},e.data.pos1={x:e.x,y:e.y},e.data.visible=!0,e.data.open=!0}),a}),y="ActionClose",R="ActionOpen",k="ActionRemove",w="ActionStop";function C(e,t){var a=t.type,n=t.node,r=t.createNode;switch(a){case R:n.data.open=!0,n.children||(n.data.children=n.data._children,n.data._children=void 0);var c=(e=r(e.data)).descendants().find(function(e){return e.data.name==n.data.name});if(!c||!c.children)return e;return function e(t){t.forEach(function(t){t.data.visible=!0,t.data.pos0={x:n.x,y:n.y},t.children&&e(t.children)})}(c.children),e.descendants().forEach(function(e){e.data.visible&&(e.data.pos1={x:e.x,y:e.y})}),e;case y:if(!n.children)return e;n.data.open=!1;return function e(t){t.forEach(function(t){t.data.visible=!1,t.data.pos0=t.data.pos1,t.data.pos1={x:n.x,y:n.y},t.children&&e(t.children)})}(n.children),r(e.data);case k:return n.parent&&n.parent.data.children&&!n.parent.data.open?(n.parent.data._children=n.parent.data.children,n.parent.data.children=void 0,(e=r(e.data)).descendants().forEach(function(e){e.data.visible&&(e.data.pos1={x:e.x,y:e.y})}),e):e;case w:return n.parent?n.data.pos0={x:n.parent.x,y:n.parent.y}:n.data.pos0=n.data.pos1,e}return e}var N=Object(n.createContext)({}),S=function(e){var t=e.node,a=Object(n.useContext)(N),c=a.dispatch,o=a.createNode,l=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(l.current).attr("transform","translate(".concat(t.data.pos0.y,",").concat(t.data.pos0.x,")"))},[]),Object(n.useEffect)(function(){var e=m.l(l.current);e.on("click",function(){t.data.open?c(function(e,t){return{type:y,node:e,createNode:t}}(t,o)):c(function(e,t){return{type:R,node:e,createNode:t}}(t,o))}),e.transition().duration(250).attr("transform","translate(".concat(t.data.pos1.y,",").concat(t.data.pos1.x,")")).attr("opacity",t.data.visible?1:0).on("end",function(){t.data.visible?c(function(e,t){return{type:w,node:e,createNode:t}}(t,o)):c(function(e,t){return{type:k,node:e,createNode:t}}(t,o))})},[t]),r.a.createElement("g",{ref:l,opacity:0},r.a.createElement("circle",{r:8,fill:t.data.open?"#999":"#800"}),r.a.createElement("text",{dy:3,x:-10,y:-5,style:{textAnchor:"end"},fontSize:"200%"},e.node.data.name))},D=m.j().x(function(e){return e.y}).y(function(e){return e.x}),z=function(e){var t=e.node,a=Object(n.useRef)(null);return Object(n.useEffect)(function(){var e=m.l(a.current),n={source:t.data.pos0,target:t.data.pos0};e.datum(n).attr("d",D)},[]),Object(n.useEffect)(function(){var e,n=m.l(a.current);e=t.data.visible?{source:t.parent,target:t.data.pos1}:{source:t.data.pos1,target:t.data.pos1},n.datum(e).transition().duration(250).attr("d",D)},[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("path",{ref:a,className:"link"}))},A=function(e){var t=e.width,a=e.height,c=e.data,o=Object(n.useRef)(null),l=Object(n.useMemo)(function(){var e=function(e,t){var a=m.m().size([t,e-160]);return function(e){return a(m.i(e))}}(t,a);return{initialRoot:x(c,e),createNode:e}},[t,a,c]),i=l.initialRoot,s=l.createNode,u=Object(n.useReducer)(C,i),f=Object(d.a)(u,2),h=f[0],b=f[1];return r.a.createElement(N.Provider,{value:{dispatch:b,createNode:s}},r.a.createElement("svg",{ref:o,width:t,height:a,viewBox:"-50,0,".concat(t,",").concat(a),style:{backgroundColor:"#ccc"}},h.descendants().slice(1).map(function(e){return r.a.createElement(z,{key:e.data.name,node:e})}),h.descendants().map(function(e,t){return r.a.createElement(S,{key:e.data.name,node:e})})))},M=function(){return r.a.createElement("svg",{className:"svg-root",width:"200",height:"100"},r.a.createElement("circle",{cx:"100",cy:"50",r:"10",fill:"red"}))},B=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useCallback)(function(){c(function(e){return!e})},[]);return r.a.createElement("svg",{className:"svg-root",width:"200",height:"100"},r.a.createElement("circle",{cx:"100",cy:"50",r:"10",fill:a?"red":"blue",onClick:o}))},P=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(e.current).append("circle").attr("cx",100).attr("cy",50).attr("r",10).attr("fill","red")},[]),r.a.createElement("svg",{ref:e,className:"svg-root",width:"200",height:"100"})},F=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(e.current).append("circle").datum({fill:!0}).attr("cx",100).attr("cy",50).attr("r",10).attr("fill","red").on("click",function(){m.l(this).attr("fill",function(e){return e.fill=!e.fill,e.fill?"blue":"red"})})},[]),r.a.createElement("svg",{ref:e,className:"svg-root",width:"200",height:"100"})},I=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(e.current).append("circle").datum({fill:!0}).attr("cx",100).attr("cy",50).attr("r",10).attr("fill","red").on("click",function(){m.l(this).transition().duration(1e3).attr("fill",function(e){return e.fill=!e.fill,e.fill?"blue":"red"})})},[]),r.a.createElement("svg",{ref:e,className:"svg-root",width:"200",height:"100"})},J=function(e){var t=e.x,a=e.y,c=e.r,o=Object(n.useState)(!0),l=Object(d.a)(o,2),i=l[0],s=l[1],u=Object(n.useCallback)(function(){s(function(e){return!e})},[]),f=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(f.current).transition().duration(1e3).attr("fill",i?"red":"blue")},[i]),r.a.createElement("circle",{ref:f,cx:t,cy:a,r:c,onClick:u,fill:"red"})},T=function(){return r.a.createElement("svg",{className:"svg-root",width:"200",height:"100"},r.a.createElement(J,{x:50,y:50,r:10}),r.a.createElement(J,{x:100,y:50,r:10}),r.a.createElement(J,{x:150,y:50,r:10}))},_=function(e){var t=e.x,a=e.y,c=e.r,o=Object(n.useState)(!0),l=Object(d.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)("red"),f=Object(d.a)(u,2),h=f[0],b=f[1],E=Object(n.useCallback)(function(){s(function(e){return!e})},[]),p=Object(n.useRef)(null);return Object(n.useEffect)(function(){m.l(p.current).transition().duration(1e3).attr("fill",i?"red":"blue").on("end",function(){b(i?"red":"blue")})},[i]),r.a.createElement("circle",{ref:p,cx:t,cy:a,r:c,onClick:E,fill:h})},G=function(){return r.a.createElement("svg",{className:"svg-root",width:"200",height:"100"},r.a.createElement(_,{x:50,y:50,r:10}),r.a.createElement(_,{x:100,y:50,r:10}),r.a.createElement(_,{x:150,y:50,r:10}))},W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).h1Refs={"#pure-click":Object(n.createRef)(),"#d3":Object(n.createRef)(),"#react-d3-click":Object(n.createRef)(),"#react-d3-tr":Object(n.createRef)(),"#react-tr":Object(n.createRef)(),"#react-tr2":Object(n.createRef)(),"#zoom":Object(n.createRef)(),"#force":Object(n.createRef)(),"#tree":Object(n.createRef)()},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.h1Refs[location.hash];e&&setTimeout(function(){e.current.scrollIntoView({block:"start",behavior:"smooth"})},250)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"D3\u306a\u3057"),r.a.createElement(M,null),r.a.createElement("h1",{ref:this.h1Refs["#pure-click"]},"D3\u306a\u3057+\u30af\u30ea\u30c3\u30af"),r.a.createElement(B,null),r.a.createElement("h1",{ref:this.h1Refs["#d3"]},"D3"),r.a.createElement(P,null),r.a.createElement("h1",{ref:this.h1Refs["#react-d3-click"]},"D3+\u30af\u30ea\u30c3\u30af"),r.a.createElement(F,null),r.a.createElement("h1",{ref:this.h1Refs["#react-d3-tr"]},"D3+\u30af\u30ea\u30c3\u30af+\u30c8\u30e9\u30f3\u30b8\u30b7\u30e7\u30f3"),r.a.createElement(I,null),r.a.createElement("h1",{ref:this.h1Refs["#react-tr"]},"React+\u30c8\u30e9\u30f3\u30b8\u30b7\u30e7\u30f3(D3)"),r.a.createElement(T,null),r.a.createElement("h1",{ref:this.h1Refs["#react-tr2"]},"React+\u30c8\u30e9\u30f3\u30b8\u30b7\u30e7\u30f3(D3)+\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u8ffd\u52a0"),r.a.createElement(G,null),r.a.createElement("h1",{ref:this.h1Refs["#zoom"]},"React+D3 Zoom/Pan"),r.a.createElement(v,{width:600,height:400}),r.a.createElement("h1",{ref:this.h1Refs["#force"]},"React+D3 ForceSimulation"),r.a.createElement("p",null,"\u30af\u30ea\u30c3\u30af\u3067\u30dc\u30fc\u30eb\u8ffd\u52a0\u3002\u30c9\u30e9\u30c3\u30b0\u30fb\u30ba\u30fc\u30e0\u53ef\u80fd\u3002"),r.a.createElement(g,{width:600,height:400,nodes:[{id:1,name:"1",val:30},{id:2,name:"2",val:40}]}),r.a.createElement("h1",{ref:this.h1Refs["#tree"]},"React+D3 \u30c4\u30ea\u30fc"),r.a.createElement("p",null,"\u30af\u30ea\u30c3\u30af\u3067\u958b\u9589"),r.a.createElement(A,{width:600,height:400,data:{name:"A",children:[{name:"B"},{name:"C",children:[{name:"D"},{name:"E"}]},{name:"F"},{name:"G",children:[{name:"H"}]},{name:"I",children:[{name:"J",children:[{name:"K"},{name:"L"},{name:"M"}]}]}]}}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.748a90d8.chunk.js.map